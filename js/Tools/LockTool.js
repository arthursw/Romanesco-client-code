// Generated by CoffeeScript 1.7.1
(function() {
  var __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  define(['utils', 'ItemTool'], function(utils, ItemTool) {
    var LockTool;
    LockTool = (function(_super) {
      __extends(LockTool, _super);

      LockTool.rname = 'Lock';

      LockTool.description = '';

      LockTool.iconURL = 'lock.png';

      LockTool.favorite = true;

      LockTool.category = '';

      LockTool.cursor = {
        position: {
          x: 0,
          y: 0
        },
        name: 'default',
        icon: 'key'
      };

      function LockTool() {
        LockTool.__super__.constructor.call(this, g.RLock);
        this.textItem = null;
        return;
      }

      LockTool.prototype.update = function(event, from) {
        var cost, point, _ref;
        if (from == null) {
          from = g.me;
        }
        point = event.point;
        cost = g.currentPaths[from].bounds.area / 1000.0;
        if ((_ref = this.textItem) != null) {
          _ref.remove();
        }
        this.textItem = new PointText(point);
        this.textItem.justification = 'right';
        this.textItem.fillColor = 'black';
        this.textItem.content = '' + cost + ' romanescoins';
        LockTool.__super__.update.call(this, event, from);
      };

      LockTool.prototype.end = function(event, from) {
        var _ref;
        if (from == null) {
          from = g.me;
        }
        if ((_ref = this.textItem) != null) {
          _ref.remove();
        }
        if (LockTool.__super__.end.call(this, event, from)) {
          g.RLock.initialize(g.currentPaths[from].bounds);
          delete g.currentPaths[from];
        }
      };

      return LockTool;

    })(ItemTool);
    return LockTool;
  });

}).call(this);

//# sourceMappingURL=LockTool.map
